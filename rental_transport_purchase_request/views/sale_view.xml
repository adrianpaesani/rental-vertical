<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_order_form" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_rental.view_order_form"/>
            <field name="arch" type="xml">
                <button name="print_quotation" position="after">
                    <button name="action_create_trans_pr" type="object" string="Create Transport PR"
                            attrs="{'invisible': ['|', ('trans_pr_needed', '=', False), ('trans_pr_created', '=', True)]}"/>
                    <button name="action_create_trans_cost" type="object" string="Create Transport Cost"
                            attrs="{'invisible': ['|', ('trans_pr_needed', '=', False), ('trans_cost_created', '=', True)]}"/>
                </button>
                <button name="action_confirm" id="action_confirm" position="attributes">
                    <attribute name="attrs">{'invisible': ['|', ('state', 'not in', ['sent']), ('trans_cost_created', '=', False)]}</attribute>
                </button>
                <button name="action_confirm" attrs="{'invisible': [('state', 'not in', ['draft'])]}" position="attributes">
                    <attribute name="attrs">{'invisible': ['|', ('state', 'not in', ['draft']), ('trans_cost_created', '=', False)]}</attribute>
                </button>
                <xpath expr="//field[@name='order_line']//field[@name='customer_lead']/.." position="after">
                    <field name="planned_source_address_id"/>
                    <field name="trans_pr_needed"/>
                    <field name="trans_pr_created"
                           attrs="{'invisible': [('trans_pr_needed', '=', False)]}"/>
                    <field name="trans_purchase_id"
                           attrs="{'invisible': [('trans_pr_needed', '=', False)]}"/>
                </xpath>
                <group name="sale_shipping" position="inside">
                    <field name="trans_pr_needed"/>
                    <field name="trans_pr_created"/>
                    <field name="trans_cost_created"/>
                </group>
            </field>
        </record>

    </data>
</odoo>
